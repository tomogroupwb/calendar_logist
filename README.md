# Календарь логиста

Веб-приложение для отслеживания заказов логиста с возможностью фильтрации, поиска и просмотра деталей заказов.

## Функциональность

- **Календарное отображение заказов** - просмотр в формате месяца и списка
- **Умная фильтрация** - по поставщику, городу и подразделению
- **Поиск по всем полям** - быстрый поиск заказов с автоматическим переходом к найденному месяцу
- **Детальная информация** - просмотр всех данных заказа при клике на событие
- **Интеграция с Google Sheets** - загрузка данных из нескольких таблиц одновременно
- **Google OAuth авторизация** - безопасный доступ к приложению
- **Цветовое кодирование** - события окрашены по подразделениям для быстрой навигации
- **Адаптивный дизайн** - работает на всех устройствах

## Новые возможности

### Поиск
- Поиск по номеру заказа, поставщику, подразделению, городу и заказу 1С
- Автоматический переход календаря к месяцу найденных заказов
- Мгновенная фильтрация результатов

### Расширенные данные заказов
- **Количество мест** - информация о количестве грузовых мест
- **Вес (кг)** - общий вес заказа
- **Объем** - объемные характеристики груза

### Улучшенный дизайн
- Современный интерфейс с улучшенной читаемостью
- Цветовое кодирование по подразделениям
- Hover эффекты и плавные переходы
- Оптимизированное отображение событий в календаре

## Настройка Google Sheets API

Для работы с Google Sheets API:

1. Зайдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. Включите **Google Sheets API** и **Google Drive API**
4. Создайте учетные данные:
   - **API ключ** для доступа к Google Sheets
   - **OAuth 2.0 Client ID** для авторизации пользователей
5. Настройте ограничения доступа и разрешенные домены
6. Добавьте полученные ключи в файл `.env`

## Структура данных Google Sheets

Таблица должна содержать следующие столбцы (настраиваемые в интерфейсе):

| Столбец | Описание | Формат |
|---------|----------|--------|
| **A** | Заказ 1С | Текст |
| **B** | № Заказа (Поставщик) | Текст |
| **C** | Поставщик | Текст |
| **D** | Подразделение | Текст |
| **E** | Город | Текст |
| **F** | Ссылка (Заказ Поставщика) | URL |
| **G** | Заявленная дата готовности | ДД.ММ.ГГГГ или ГГГГ-ММ-ДД |
| **H** | Желаемая дата поступления | ДД.ММ.ГГГГ или ГГГГ-ММ-ДД |
| **I** | Количество мест | Число |
| **J** | Вес (кг) | Число |
| **K** | Объем | Число |

*Столбцы можно настроить в интерфейсе приложения при добавлении конфигурации таблицы*

## Цветовое кодирование подразделений

Приложение автоматически окрашивает события по подразделениям:
- **ИП ЦНМ** - фиолетовый
- **ИП БАЕ** - синий  
- **ИП БРМ** - зеленый
- **ИП БЕС** - красный
- **ИП БСМ** - оранжевый
- **Вайлдберриз/WB** - малиновый
- **Озон/OZON** - синий Озон
- **Остальные** - темно-серый

## Технологии

- **React 18** с TypeScript
- **Tailwind CSS** для стилизации
- **FullCalendar** для отображения календаря
- **Google Sheets API** для получения данных
- **Google OAuth 2.0** для авторизации
- **Vite** для сборки проекта
- **LocalStorage** для хранения конфигураций

## Переменные окружения

Создайте файл `.env` в корне проекта:

```env
# Google API
VITE_GOOGLE_CLIENT_ID=your_google_client_id
VITE_GOOGLE_SHEETS_API_KEY=your_google_sheets_api_key
```

## Инструкция по запуску

```bash
# Установка зависимостей
npm install

# Создайте файл .env и заполните переменные окружения
cp .env.example .env
# Отредактируйте .env файл

# Запуск в режиме разработки
npm run dev

# Сборка для продакшн
npm run build

# Предпросмотр продакшн версии
npm run preview
```

## Использование приложения

### 1. Настройка таблиц
- Войдите в приложение через Google аккаунт
- Перейдите в раздел "Настройки таблиц"
- Добавьте конфигурацию Google Sheets с указанием ID таблицы и маппинга столбцов
- Можно добавить несколько таблиц для одновременной загрузки данных

### 2. Просмотр календаря
- События отображаются по "Желаемой дате поступления"
- Клик по событию открывает детальную информацию
- Используйте фильтры для быстрого поиска нужных заказов

### 3. Поиск и фильтрация
- Введите текст в поле поиска для поиска по всем полям
- Используйте фильтры по поставщику, городу и подразделению
- Календарь автоматически переключится на месяц найденных заказов

## Деплой на Netlify

### Вариант 1: Через веб-интерфейс

1. Создайте аккаунт на [Netlify](https://www.netlify.com/)
2. Подключите репозиторий с проектом (GitHub, GitLab, Bitbucket)
3. Настройте переменные окружения в настройках проекта (Settings → Build & deploy → Environment):
   ```
   VITE_GOOGLE_CLIENT_ID=your_google_client_id
   VITE_GOOGLE_SHEETS_API_KEY=your_google_sheets_api_key
   ```
4. Произойдет автоматический деплой приложения
5. Для настройки кастомного домена используйте раздел "Domain management"

### Вариант 2: Через командную строку (Netlify CLI)

1. Установите Netlify CLI глобально:
   ```bash
   npm install netlify-cli -g
   ```

2. Авторизуйтесь в Netlify:
   ```bash
   netlify login
   ```

3. Подготовьте сборку проекта:
   ```bash
   # Создайте файл .env с переменными окружения
   # Установите зависимости, если еще не установлены
   npm install
   
   # Соберите проект
   npm run build
   ```

4. Инициализируйте проект Netlify (если это первый деплой):
   ```bash
   netlify init
   ```
   - Выберите "Create & configure a new site"
   - Выберите команду Netlify, к которой относится ваш проект
   - Задайте имя сайта (или оставьте случайно сгенерированное)
   - Подтвердите настройки сборки (команда: `npm run build`, директория публикации: `dist`)

5. Настройте переменные окружения:
   ```bash
   # Добавление всех переменных из .env на Netlify
   netlify env:import .env
   ```

6. Деплой проекта:
   ```bash
   netlify deploy --prod
   ```

7. Для настройки кастомного домена:
   ```bash
   netlify domains:add mydomain.com
   ```

8. Проверьте статус вашего сайта:
   ```bash
   netlify status
   ```

### После деплоя

**Важно:** обязательно добавьте доменные имена Netlify (включая автоматически сгенерированное имя *.netlify.app) в список разрешенных доменов в Google Cloud Console для корректной работы OAuth авторизации и API.

### Настройка Google Cloud Console после деплоя

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Выберите ваш проект
3. Перейдите в "APIs & Services" → "Credentials"
4. Найдите ваш OAuth 2.0 Client ID
5. Добавьте в "Authorized JavaScript origins":
   - `https://your-app-name.netlify.app`
   - `https://your-custom-domain.com` (если используете)
6. Добавьте в "Authorized redirect URIs":
   - `https://your-app-name.netlify.app`
   - `https://your-custom-domain.com` (если используете)

## Лицензия

MIT License